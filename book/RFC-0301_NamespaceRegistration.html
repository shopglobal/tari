<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>RFC-0301: Namespace Registration - The Tari Network: RFC library</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The Tari network RFC library and documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">
          MathJax.Hub.Config({
            tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true
            }
          });
        </script>
        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">var path_to_root = "";</script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var sidebar = localStorage.getItem('mdbook-sidebar');
                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme = 'light';
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <img src="theme/images/tari-splash.png" class="tlu">

            <ol class="chapter"><li class="affix"><a href="about.html">About the Tari RFC documents</a></li><li><a href="RFC-0001_overview.html"><strong aria-hidden="true">1.</strong> RFC-0001: An overview of the Tari network</a></li><li><a href="RFC-0010_CodeStructure.html"><strong aria-hidden="true">2.</strong> RFC-0010: Tari code structure and organisation</a></li><li><a href="RFC-0100_BaseLayer.html"><strong aria-hidden="true">3.</strong> RFC-0100: The Tari Base Layer</a></li><li><ol class="section"><li><a href="RFC-0110_BaseNodes.html"><strong aria-hidden="true">3.1.</strong> RFC-0110: Base nodes</a></li><li><a href="RFC-0130_Mining.html"><strong aria-hidden="true">3.2.</strong> RFC-0130: Mining</a></li><li><a href="RFC-0140_Syncing_and_seeding.html"><strong aria-hidden="true">3.3.</strong> RFC-0140: Sync and Seeding</a></li><li><a href="RFC-0150_Wallets.html"><strong aria-hidden="true">3.4.</strong> RFC-0150: Wallets</a></li><li><a href="RFC-0170_NetworkCommunicationProtocol.html"><strong aria-hidden="true">3.5.</strong> RFC-0170: Network Communication Protocol</a></li></ol></li><li><a href="RFC-0200_BaseLayerExtensions.html"><strong aria-hidden="true">4.</strong> RFC-0200: Tari-specific extensions to Mimblewimble</a></li><li><ol class="section"><li><a href="RFC-0220_AssetCheckpoints.html"><strong aria-hidden="true">4.1.</strong> RFC-0220: Asset checkpoints</a></li><li><a href="RFC-0230_HTLC.html"><strong aria-hidden="true">4.2.</strong> RFC-0230: Hash time locked contracts</a></li><li><a href="RFC-0322_VNRegistration.html"><strong aria-hidden="true">4.3.</strong> RFC-0322: Validator Node Registration</a></li><li><a href="RFC-0341_AssetRegistration.html"><strong aria-hidden="true">4.4.</strong> RFC-0341: Asset registration</a></li></ol></li><li><a href="RFC-0300_DAN.html"><strong aria-hidden="true">5.</strong> RFC-0300: The Digital Assets Network</a></li><li><ol class="section"><li><a href="RFC-0301_NamespaceRegistration.html" class="active"><strong aria-hidden="true">5.1.</strong> RFC-0301: Namespace Registration</a></li></ol></li><li><a href="RFC-0320_ValidatorNodes.html"><strong aria-hidden="true">6.</strong> RFC-0320: Validator Nodes</a></li><li><ol class="section"><li><a href="RFC-0321_VNAssetDiscovery.html"><strong aria-hidden="true">6.1.</strong> RFC-0321: Asset discovery</a></li><li><a href="RFC-0322_VNRegistration.html"><strong aria-hidden="true">6.2.</strong> RFC-0322: Validator Node Registration</a></li><li><a href="RFC-0323_VNCommittees.html"><strong aria-hidden="true">6.3.</strong> RFC-0323: Validator Node committee selection</a></li><li><a href="RFC-0310_AssetTemplates.html"><strong aria-hidden="true">6.4.</strong> RFC-0310: Digital Asset templates</a></li><li><a href="RFC-0325_AssetReadAPI.html"><strong aria-hidden="true">6.5.</strong> RFC-0325: The asset read-only API</a></li></ol></li><li><a href="RFC-0340_VNConsensusOverview.html"><strong aria-hidden="true">7.</strong> RFC-0340: Validator Node Consensus</a></li><li><ol class="section"><li><a href="RFC-0341_AssetRegistration.html"><strong aria-hidden="true">7.1.</strong> RFC-0341: Asset registration</a></li><li><a href="RFC-0342_VNInstructions.html"><strong aria-hidden="true">7.2.</strong> RFC-0342: Validator node instructions</a></li><li><a href="RFC-0343_VNConsensusAlgorithm.html"><strong aria-hidden="true">7.3.</strong> RFC-0343: The VN consensus algorithm</a></li><li><a href="RFC-0344_VNAssetTransfer.html"><strong aria-hidden="true">7.4.</strong> RFC-0344: Asset transfer mechanism</a></li><li><a href="RFC-0345_VNAssetRetirement.html"><strong aria-hidden="true">7.5.</strong> RFC-0345: Asset retirement</a></li></ol></li><li><a href="RFC-0350_DisputeResolution.html"><strong aria-hidden="true">8.</strong> RFC-0350: DAN Dispute resolution mechanism</a></li><li><a href="RFC-0370_TariCollections.html"><strong aria-hidden="true">9.</strong> RFC-0370: Tari Collections</a></li><li><ol class="section"><li><a href="RFC-0371_TokenWallet.html"><strong aria-hidden="true">9.1.</strong> RFC-0371: Token wallet</a></li><li><a href="RFC-0372_TCP2PComm.html"><strong aria-hidden="true">9.2.</strong> RFC-0372: Tari Collections Peer-to-peer communication</a></li><li><a href="RFC-0373_TCInstructionAPI.html"><strong aria-hidden="true">9.3.</strong> RFC-0373: Instruction API</a></li><li><a href="RFC-0374_TCAssetManagement.html"><strong aria-hidden="true">9.4.</strong> RFC-0374: Asset Creation and management</a></li><li><a href="RFC-0375_TCWalletBridge.html"><strong aria-hidden="true">9.5.</strong> RFC-0375: Tari wallet bridge</a></li></ol></li><li><a href="RFC-0500_PaymentChannels.html"><strong aria-hidden="true">10.</strong> RFC-0500: Tari payment channels</a></li><li><ol class="section"><li><a href="RFC-0530_P2PPayments.html"><strong aria-hidden="true">10.1.</strong> RFC-0530: Peer-to-peer payments</a></li><li><a href="RFC-0550_VNFees.html"><strong aria-hidden="true">10.2.</strong> RFC-0550: Instruction fees</a></li></ol></li><li><a href="Glossary.html"><strong aria-hidden="true">11.</strong> Glossary</a></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title"><img src="theme/images/tari-horizontal-logo.png"/> </h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <a class="header" href="#rfc-0301namespaceregistration" id="rfc-0301namespaceregistration"><h1>RFC-0301/NamespaceRegistration</h1></a>
<a class="header" href="#namespace-registration-on-the-base-layer" id="namespace-registration-on-the-base-layer"><h2>Namespace Registration on the Base Layer</h2></a>
<p><img src="./theme/images/status-draft.svg" alt="status: raw" /></p>
<p><strong>Maintainer(s)</strong>: <a href="https://github,com/hansieodendaal">Hansie Odendaal</a></p>
<a class="header" href="#license" id="license"><h1>License</h1></a>
<p><a href="https://opensource.org/licenses/BSD-3-Clause"> The 3-Clause BSD License</a>.</p>
<p>Copyright 2019 The Tari Development Community</p>
<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the
following conditions are met:</p>
<ol>
<li>Redistributions of this document must retain the above copyright notice, this list of conditions and the following
disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following
disclaimer in the documentation and/or other materials provided with the distribution.</li>
<li>Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products
derived from this software without specific prior written permission.</li>
</ol>
<p>THIS DOCUMENT IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS ORRAID
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
<a class="header" href="#language" id="language"><h2>Language</h2></a>
<p>The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;, &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;,
&quot;NOT RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this document are to be interpreted as described in
<a href="https://tools.ietf.org/html/bcp14">BCP 14</a> (covering RFC2119 and RFC8174) when, and only when, they appear in all capitals, as
shown here.</p>
<a class="header" href="#disclaimer" id="disclaimer"><h2>Disclaimer</h2></a>
<p>The purpose of this document and its content is for information purposes only and may be subject to change or update
without notice.</p>
<p>This document may include preliminary concepts that may or may not be in the process of being developed by the Tari
community. The release of this document is intended solely for review and discussion by the community regarding the
technological merits of the potential system outlined herein.</p>
<a class="header" href="#goals" id="goals"><h2>Goals</h2></a>
<p>This purpose of this document is to describe and specify the process for creating and linking an <a href="Glossary.html#asset-issuer">asset issuer</a>
specified domain name with a <a href="Glossary.html#digital-asset">digital asset</a> on the Digital Assets Network (<a href="Glossary.html#digital-asset-network">DAN</a>).</p>
<a class="header" href="#related-rfcs" id="related-rfcs"><h2>Related RFCs</h2></a>
<ul>
<li><a href="RFC-0341_AssetRegistration.html">RFC-0341/AssetRegistration</a></li>
<li><a href="RFC-0310_AssetTemplates.html">RFC-0310/AssetTemplates</a></li>
</ul>
<p><br></p>
<a class="header" href="#description" id="description"><h1>Description</h1></a>
<a class="header" href="#background" id="background"><h2>Background</h2></a>
<a class="header" href="#alternative-approaches" id="alternative-approaches"><h3>Alternative Approaches</h3></a>
<p>In order to easily differentiate different <a href="Glossary.html#digital-asset">digital asset</a>s in the DAN, apart from some unique unpronounceable
character string, a human readable identifier (domain name) is required. It is perceived that shorter names will have
higher value due to branding and marketability, and the question is how this can be managed elegantly. It is also
undesirable if for example the real Disney is forced to use the long versioned &quot;<em>disney.com-goofy-is-my-asset-yes</em>&quot;
because some fake Disneys claimed &quot;<em>goofy</em>&quot; and &quot;<em>disney.com-goofy</em>&quot; and everything in between.</p>
<p>One method to curb name space squatting is to register names on the <a href="Glossary.html#base-layer">base layer</a> layer with a domain name registration
transaction. Let us call such a name a Registered Asset Issuer Name (RAIN). To make registering RAINs difficult enough
to prevent spamming the network, a certain amount of <a href="Glossary.html#tari-coin">Tari coins</a> must be committed in a burn (permanently destroy) or
a time locked pay to self type transaction. Lots of management overhead will be associated with such a scheme, even if
domain-less assets are allowed. However, it would be impossible to stop someone
from registering say a &quot;<em>disney.com</em>&quot; RAIN if they do not own the real &quot;<em>disney.com</em>&quot; Fully Qualified Domain Name (FQDN).</p>
<p>Another approach would be to make use of the public Domain Name System (DNS) and to link the FQDNs, that are already
registered, to the <a href="Glossary.html#digital-asset">digital asset</a>s in the DAN, making use of <a href="https://openalias.org/">OpenAlias</a> text (TXT) DNS
records on a FQDN. Let us call this a Registered Asset Issuer Domain (RAID) TXT record. If we hash a public key and
FQDN pair, it will provide us with a unique RAID_ID (RAID Identification). The RAID_ID will serve a similar purpose in
the DAN as a Top Level Domain (TLD) in a DNS, as all digital assets belonging to a specific <a href="Glossary.html#asset-issuer">asset issuer</a> could then
be grouped under the FQDN by inference. To make this scheme more elaborate, but potentially unnecessary, all such
RAID_IDs could be also be registered on the <a href="Glossary.html#base-layer">base layer</a> layer, similar to the RAIN scheme.</p>
<p>If the standard Mimblewimble protocol is to be followed, a new output feature can be defined to cater for a RAID tuple
<code>(RAID_ID, PubKey)</code> that is linked to a specific Unspent Transaction Output (<a href="Glossary.html#unspent-transaction-outputs">UTXO</a>). The <code>RAID_ID</code> could be based on
a <a href="https://en.bitcoin.it/wiki/Base58Check_encoding">Base58Check</a> variant applied to <code>Hash256(PubKey || FQDN)</code>. If the
amount of Tari coins associated with the RAID tuple transaction is burned, <code>(RAID_ID, PubKey)</code> will forever be present
on the blockchain and can assist with blockchain bloat. On the other hand, if those <a href="Glossary.html#tari-coin">Tari coins</a> are spent back to its
owner with a specific time lock, it will be possible to spend and prune that UTXO later on. While that UTXO remains
unspent, the RAID tuple will be valid, but when all or part of it is spent, the RAID tuple will disappear from the
blockchain. Such a UTXO will thus be &quot;colored&quot; while unspent as it will have different properties to a normal UTXO. It
will also be possible to recreate the original RAID tuple by registering it using the original <code>Hash256(PubKey || FQDN)</code>.</p>
<p>Thinking about the makeup of the <code>RAID_ID</code> it is evident that it can easily be calculated on the fly using the public
key and FQDN, both of which values will always be known. The biggest advantage having the RAID tuple on the <a href="Glossary.html#base-layer">base
layer</a> is that of embedded consensus, where it will be validated (as no duplicates can be allowed) and mined before it
can be used. However, this comes at the cost of more complex code, a more elaborate asset registration process and
higher asset registration fees.</p>
<a class="header" href="#this-rfc" id="this-rfc"><h3>This RFC</h3></a>
<p>This document explores the creation and use of RAID TXT records to link asset issuer specified domain names with
digital assets on the <a href="Glossary.html#digital-asset-network">DAN</a>, without RAID_IDs being registered on the <a href="Glossary.html#base-layer">base layer</a>.</p>
<a class="header" href="#requirements" id="requirements"><h2>Requirements</h2></a>
<a class="header" href="#openalias-txt-dns-records" id="openalias-txt-dns-records"><h3>OpenAlias TXT DNS Records</h3></a>
<p>An OpenAlias TXT DNS record [<a href="https://docs.rs/openalias/0.2.0/openalias/index.html" title="Crate openalias">1</a>] on a FQDN is a single string and starts with &quot;<em>oa1:&lt;name&gt;</em>&quot; field followed by a
number of key-value pairs. Standard (optional) key-values are: &quot;<em>recipient_address</em>&quot;; &quot;<em>recipient_name</em>&quot;;
&quot;<em>tx_description</em>&quot;; &quot;<em>tx_amount</em>&quot;; &quot;<em>tx_payment_id</em>&quot;; &quot;<em>address_signature</em>&quot; and &quot;<em>checksum</em>&quot;. Additional key-values
may also be defined. Only entities with write access to a specific DNS record will be able to create the required TXT
DNS record entries.</p>
<p>TXT DNS records are limited to multiple strings of size 255, and as the User Datagram Protocol (UDP) size is 512 bytes, a TXT DNS record that exceeds that limit is less optimal [<a href="https://tools.ietf.org/html/rfc7208" title="RFC 7208">2</a>, Sections 3.3 &amp; 3.4].</p>
<p><strong>Req</strong> - Integration with public DNS records MUST be used to ensure valid ownership of an FQDN that needs to be
linked to a <a href="Glossary.html#digital-asset">digital asset</a> on the DAN.</p>
<p><strong>Req</strong> - The total size of the OpenAlias TXT DNS record MUST not exceed 512 characters.</p>
<p><strong>Req</strong> - The OpenAlias TXT DNS record implementation MUST make provision to interpret entries that are made up of more than one string as defined in [<a href="https://tools.ietf.org/html/rfc7208" title="RFC 7208">2</a>].</p>
<p><strong>Req</strong> - The OpenAlias TXT DNS record MUST be constructed as follows:</p>
<table><thead><tr><th> OpenAlias TXT DNS Record Field </th><th> OpenAlias TXT DNS Record Data                                </th></tr></thead><tbody>
<tr><td> oa1:&lt;name&gt;                   </td><td> &quot;oa1:tari_raid&quot;                                              </td></tr>
<tr><td> fqdn                           </td><td> &lt;FQDN&gt;                                                     </td></tr>
<tr><td> pub_key                        </td><td> &lt;256 bit public key in hexadecimal format excluding the leading &quot;0x&quot; (64 characters)&gt; </td></tr>
<tr><td> raid_id                        </td><td> &lt;<code>RAID_ID</code> (<em>see <a href="#the-raid_id">The RAID_ID</a></em>) in hexadecimal format excluding the leading &quot;0x&quot; (44 characters)&gt; </td></tr>
<tr><td> pub_nonce                      </td><td> &lt;256 bit public nonce in hexadecimal format excluding the leading &quot;0x&quot; (64 characters)&gt; </td></tr>
<tr><td> signature                      </td><td> &lt;<a href="Glossary.html#asset-issuer">Asset issuer</a>'s 256 bit Schnorr signature for the <code>RAID_ID</code> (<em>see <a href="#the-raid_id">The RAID_ID</a></em>), in hexadecimal format excluding the leading &quot;0x&quot; (64 characters)&gt; </td></tr>
<tr><td> description                    </td><td> &lt;Optional RAID description&gt;                                </td></tr>
<tr><td> checksum                       </td><td> &lt;CRC-32 checksum of the entire record up to but excluding the checksum key-value pair, in hexadecimal format excluding the leading &quot;0x&quot; (8 characters)&gt; </td></tr>
</tbody></table>
<p><strong>Req</strong> - The OpenAlias TXT DNS record MUST adhere to the formatting requirements as specified in [<a href="https://docs.rs/openalias/0.2.0/openalias/index.html" title="Crate openalias">1</a>].</p>
<a class="header" href="#the-raid_id" id="the-raid_id"><h3>The RAID_ID</h3></a>
<p>Because the <code>RAID_ID</code> does not exist as an entity on the base layer or in the <a href="Glossary.html#digital-asset-network">DAN</a>, it cannot be owned or
transferred, but only be verified as part of the OpenAlias TXT DNS record [<a href="https://docs.rs/openalias/0.2.0/openalias/index.html" title="Crate openalias">1</a>] verification. If an asset creator
chooses not to link a <code>RAID_ID</code> and FQDN, a default network assigned <code>RAID_ID</code> will be used in the digital asset
registration process.</p>
<p><strong>Req</strong> - A default <code>RAID_ID</code> MUST be used where it will not be linked to a FQDN, for example it MAY be derived
from a default input string <code>&quot;No FQDN&quot;</code>.</p>
<p><strong>Req</strong> - A FQDN linked (non-default) <code>RAID_ID</code> MUST be derived from the concatenation <code>PubKey || &lt;FQDN&gt;</code>.</p>
<p><strong>Req</strong> - All concatenations of inputs for any hash algorithm MUST be done without adding any spaces.</p>
<p><strong>Req</strong> - Deriving a <code>RAID_ID</code> follows the general process of creating a Bitcoin address [<a href="https://en.bitcoin.it/wiki/Technical_background_of_version_1_Bitcoin_addresses#How_to_create_Bitcoin_Address" title="Technical background of version 1 Bitcoin addresses">3</a>] and MUST be calculated
as follows:</p>
<ul>
<li>Inputs for all hashing algorithms used to calculate the <code>RAID_ID</code> MUST be lower case characters.</li>
<li>The <code>Hash256</code> algorithm is not prescribed, but MUST be consistently used and MUST produce a 64 character (256 bit)
hexadecimal output.</li>
<li>Stage 1 - MUST select the input string to use (either <code>&quot;No FQDN&quot;</code> or <code>PubKey || &lt;FQDN&gt;</code>).
<ul>
<li>Example: Mimblewimble public key <code>6be6f34b657b785e558e85cc3b8bdb5bcbe8c10e7e58524c8027da7727e189ef</code> and FQDN <code>disney.com</code>
is used here, resulting in <code>6be6f34b657b785e558e85cc3b8bdb5bcbe8c10e7e58524c8027da7727e189efdisney.com</code>.</li>
</ul>
</li>
<li>Stage 2 - MUST perform <code>Hash256</code> hashing on the input from stage 1.
<ul>
<li>Example: <code>01df567efd2d3db687f78aeb2cdb3b045a651f241165165cd65824fe30c4eed8</code></li>
</ul>
</li>
<li>Stage 3 - MUST perform <code>RIPEMD-160</code> hashing on the result of stage 2.
<ul>
<li>Example: <code>372180e923b2ba4bc84e1fae908bcbda387afe13</code></li>
</ul>
</li>
<li>Stage 4 - MUST concatenate the <code>RAID_ID</code> identifier byte, <code>3c</code>, with the result of stage 3.
<ul>
<li>Example: <code>3c372180e923b2ba4bc84e1fae908bcbda387afe13</code></li>
</ul>
</li>
<li>Stage 5 - MUST perform <code>Hash256</code> hashing on the extended result of stage 4.
<ul>
<li>Example: <code>c46df8650aab0e90622a13742b5f391a0598142ef96be47db9c59a0ddda8b82f</code></li>
</ul>
</li>
<li>Stage 6 - MUST perform <code>Hash256</code> hashing on the result of stage 5.
<ul>
<li>Example: <code>7ccdbb1ad04cf63a6ae09432b1882aba4ffb820b1fa93f8765054da2bdcb1bf2</code></li>
</ul>
</li>
<li>Stage 7 - MUST take the first 4 bytes of the result of stage 6; this is the address checksum.
<ul>
<li>Example: <code>7ccdbb1a</code></li>
</ul>
</li>
<li>Stage 8 - MUST concatenate the extended result of stage 4 with the 4 checksum bytes from stage 7. This is the
25-byte binary address for the <code>RAID_ID</code>.
<ul>
<li>Example: <code>3c372180e923b2ba4bc84e1fae908bcbda387afe137ccdbb1a</code></li>
</ul>
</li>
<li>Stage 9 - MUST convert the result of stage 8 from a byte string into a base58 string using <code>Base58Check</code> encoding.
This will result in a 34 character string starting with <code>R</code>.
<ul>
<li>Example: The resulting <code>RAID_ID</code> will be <code>REJhNwAdszLTteYuhY7KFTko4Q5CaVrvSu</code>.</li>
</ul>
</li>
</ul>
<p><strong>Req</strong> - A valid <code>RAID_ID</code> signature MUST be a 256 bit Schnorr signature defined as <code>s = PvtNonce + eÂ·PvtKey</code> with
the challenge <code>e</code> being <code>e = Hash256(PubNonce || PubKey || RAID_ID)</code>.</p>
<a class="header" href="#sequence-of-events" id="sequence-of-events"><h3>Sequence of Events</h3></a>
<p>The sequence of events leading up to digital asset registration are perceived as follows:</p>
<ol>
<li>
<p>The <a href="Glossary.html#asset-issuer">asset issuer</a> will decide if the default <code>RAID_ID</code> or a <code>RAID_ID</code> that is linked to a FQDN must be used for
asset registration.
(<em><strong>Note:</strong> A single linked (<code>RAID_ID</code>, FQDN) tuple may be associated with multiple digital assets from the same asset issuer.</em>)</p>
</li>
<li>
<p><strong>Req</strong> - If a default <code>RAID_ID</code> is required:</p>
<ol>
<li>The asset issuer MUST use the default <code>RAID_ID</code> (see <a href="#the-raid_id">The RAID_ID</a>).</li>
<li>The asset issuer MUST NOT sign the <code>RAID_ID</code>.</li>
</ol>
</li>
<li>
<p><strong>Req</strong> - If a linked (<code>RAID_ID</code>, FQDN) tuple is required:</p>
<ol>
<li>The asset issuer MUST create a <code>RAID_ID</code>.</li>
<li>The asset issuer MUST sign the <code>RAID_ID</code> as specified (see <a href="#the-raid_id">The RAID_ID</a>).</li>
<li>The asset issuer MUST create a valid TXT DNS record (see <a href="#openalias-txt-dns-records">OpenAlias TXT DNS Records</a>).</li>
</ol>
</li>
<li>
<p><strong>Req</strong> - <a href="Glossary.html#validator-node">Validator Node</a>s (VN) MUST only allow a valid <code>RAID_ID</code> to be used in the digital asset registration
process.</p>
</li>
<li>
<p><strong>Req</strong> - VNs MUST verify the OpenAlias TXT DNS record if a linked (<code>RAID_ID</code>, FQDN) tuple is used:</p>
<ol>
<li>Verify that all fields have been completed as per the specification (see <a href="#openalias-txt-dns-records">OpenAlias TXT DNS Records</a>).</li>
<li>Verify that the <code>RAID_ID</code> can be calculated from information provided in the TXT DNS record.</li>
<li>Verify that the asset issuer's <code>RAID_ID</code> signature is valid.</li>
<li>Verify that the FQDN corresponds to the public DNS record it is in.</li>
<li>Verify the checksum.</li>
</ol>
</li>
</ol>
<a class="header" href="#confidentiality-and-security" id="confidentiality-and-security"><h3>Confidentiality and Security</h3></a>
<p>To prevent client lookups from leaking, OpenAlias recommends making use of <a href="https://dnscrypt.info/">DNSCrypt</a>,
resolution via DNSCrypt-compatible resolvers that support Domain Name System Security Extensions (DNSSEC) and without
DNS requests being logged.</p>
<p><strong>Req</strong> - <a href="Glossary.html#token-wallet">Token Wallet</a>s (TW) and VNs SHOULD implement the following confidentiality and security measures when
dealing with OpenAlias TXT DNS records:</p>
<ul>
<li>All queries SHOULD make use of the DNSCrypt protocol.</li>
<li>Resolution SHOULD be forced via DNSCrypt-compatible resolvers that
<ul>
<li>support DNSSEC;</li>
<li>do not log DNS requests.</li>
</ul>
</li>
<li>The DNSSEC trust chain validity:
<ul>
<li>SHOULD be verified;</li>
<li>SHOULD be reported back to the <a href="Glossary.html#asset-issuer">asset issuer</a>.</li>
</ul>
</li>
</ul>
<a class="header" href="#references" id="references"><h2>References</h2></a>
<p>[<a href="https://docs.rs/openalias/0.2.0/openalias/index.html" title="Crate openalias">1</a>] Crate openalias [online]. Available: https://docs.rs/openalias/0.2.0/openalias/index.html.
Date accessed: 2019-03-05.</p>
<p>[<a href="https://tools.ietf.org/html/rfc7208" title="RFC 7208">2</a>] RFC 7208: Sender Policy Framework (SPF) for Authorizing Use of Domains in Email, Version 1 [online].
Available: https://tools.ietf.org/html/rfc7208. Date accessed: 2019-03-06.</p>
<p>[<a href="https://en.bitcoin.it/wiki/Technical_background_of_version_1_Bitcoin_addresses#How_to_create_Bitcoin_Address" title="Technical background of version 1 Bitcoin addresses">3</a>] Technical background of version 1 Bitcoin addresses [online]. Available: https://en.bitcoin.it/wiki/Technical_background_of_version_1_Bitcoin_addresses#How_to_create_Bitcoin_Address. Date accessed: 2019-03-06.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="RFC-0300_DAN.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="RFC-0320_ValidatorNodes.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="RFC-0300_DAN.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="RFC-0320_ValidatorNodes.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Initialize mermaid -->
        <script src="theme/js/mermaid.min.js" type="text/javascript" charset="utf-8"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
